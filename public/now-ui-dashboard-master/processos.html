<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <link rel="apple-touch-icon" sizes="76x76" href="../assets/img/apple-icon.png">
  <link rel="icon" type="image/png" href="../assets/img/favicon.png">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <title>
    Monitoll - Processos
  </title>
  <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no'
    name='viewport' />
  <!--     Fonts and icons     -->
  <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700,200" rel="stylesheet" />
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.1/css/all.css"
    integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
  <!-- CSS Files -->
  <link href="assets/css/bootstrap.min.css" rel="stylesheet" />
  <link href="assets/css/now-ui-dashboard.css" rel="stylesheet" />
  <!-- CSS Just for demo purpose, don't include it in your project -->
  <link href="assets/demo/demo.css" rel="stylesheet" />

</head>

<style>
  .containerP {
    max-width: 2000px;
    padding: 15px;
    overflow-y: auto;
    height: 470px;
    display: flex;
    flex-direction: row;
  }

  .containerP table {
    border: 1px solid #d6d6d6;
    border-collapse: collapse;
    width: 100%;
    background-color: #fff;
  }

  .containerP table thead {
    background-color: #ffffff;
    border: 1px solid #d6d6d6;
    border-bottom: none;
  }

  .containerP table thead th {
    text-transform: capitalize;
    border-right: 1px solid #d6d6d6;
    background-color: #f5f5f5;
    font-size: 12px;
    font-weight: 600;
  }

  .containerP table thead th:last-child {
    border-right: none;
  }

  .containerP table thead th a {
    position: relative;
    text-decoration: none;
    color: #feb900;
    display: block;
    padding: 10px;
    font-size: 12px;
    font-weight: 600;
    text-align: left;
    padding-right: 25px;
  }

  .containerP table thead th a:hover,
  .containerP table thead th a:focus {
    background-color: #e2e2e4;
  }

  .containerP table thead th.ascendent_sort,
  .containerP table thead th.descendent_sort {
    background-color: #e3edfd;
  }

  .containerP table thead th.ascendent_sort a:hover,
  .containerP table thead th.ascendent_sort a:focus,
  .containerP table thead th.descendent_sort a:hover,
  .containerP table thead th.descendent_sort a:focus {
    background-color: transparent;
  }

  .containerP table thead th.ascendent_sort a:before,
  .containerP table thead th.descendent_sort a:before {
    content: '';
    position: absolute;
    right: 10px;
    top: 50%;
    border: 5px solid transparent;
  }

  .containerP table thead th.ascendent_sort a:before {
    border-bottom-color: #feb900;
    margin-top: -7px;
  }

  .containerP table thead th.descendent_sort a:before {
    border-top-color: #feb900;
    margin-top: -2px;
  }

  .containerP table tbody tr {
    border-top: 1px solid #d6d6d6;
  }

  .containerP table tbody td {
    border-right: 1px solid #d6d6d6;
    font-size: 12px;
    padding: 10px;
  }

  .containerP table tbody td:last-child {
    border-right: none;
  }

  .responsive-table {
    width: 95%;
  }

  .loadingP {
    display: block;
    text-align: center;
    padding: 20px;
    font-size: 12px;
  }

  .quadrado {
    height: 30px;
    width: 30px;
    margin-top: 9px;
    border-radius: 50px;
    margin-left: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .qAdd {
    cursor: pointer;
    background-color: rgb(118, 250, 118);
  }

  .qKill {
    cursor: pointer;
    background-color: rgb(244, 80, 80);

  }

  .primeiro {
    margin-top: 45px;
  }

  .lado {
    display: flex;
    align-items: center;
    justify-content: space-between;
  }

  .refresh {
    margin-right: 33px;
    font-size: 28px;
    color: #feb900;
  }
</style>

<body>
  <div class="wrapper ">
    <div class="sidebar" data-color="orange">
      <!--
        Tip 1: You can change the color of the sidebar using: data-color="blue | green | orange | red | yellow"
    -->
      <div class="logo">
        <a onclick="Logout()" href="../../index.html" class="simple-text logo-mini">
          MT
        </a>
        <a onclick="Logout()" href="../../index.html" class="simple-text logo-normal">
          MoniToll
        </a>
      </div>
      <div class="sidebar-wrapper" id="sidebar-wrapper">
        <ul class="nav">
          <li>
            <a href="dashboard.html">
              <i class="now-ui-icons design_app"></i>
              <p class="maior">Dashboard</p>
            </a>
          </li>
          <li>
            <a href="registros.html">
              <i class="now-ui-icons design_bullet-list-67"></i>
              <p class="maior">Registros</p>
            </a>
          </li>
          <li>
            <a href="climaTempo.html">
              <i class="now-ui-icons objects_umbrella-13"></i>
              <p class="maior">Clima Tempo</p>
            </a>
          </li>
          </li>
          <li class="active" id="processos">
            <a href="processos.html"><i class="now-ui-icons loader_gear"></i>
              <p class="maior">Processos</p>
            </a>
          </li>
          <li id="temperatura">

          </li>
          <li>
            <a href="metricas.html">
              <i class="now-ui-icons ui-1_bell-53"></i>
              <p class="maior">Métricas</p>
            </a>
          </li>
          <li>
            <a href="dashboardAlertas.html">
              <i class="now-ui-icons business_chart-pie-36"></i>
              <p class="maior">Alertas</p>
            </a>
          </li>
          <li>
            <a href="https://app.pipefy.com/public/form/JuN9i3P6">
              <i class="now-ui-icons travel_info"></i>
              <p class="maior">Suporte</p>
            </a>
          </li>
          <li id="AddUsuario">

          </li>
          <li class="active-pro">
            <a href="../../login.html">
              <i class="now-ui-icons sport_user-run"></i>
              <p class="maior" onclick="Logout()">Sair</p>
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="main-panel" id="main-panel">
      <!-- Navbar -->
      <nav class="navbar navbar-expand-lg navbar-transparent  bg-primary  navbar-absolute">
        <div class="container-fluid">
          <div class="navbar-wrapper">
            <div class="navbar-toggle">
              <button type="button" class="navbar-toggler">
                <span class="navbar-toggler-bar bar1"></span>
                <span class="navbar-toggler-bar bar2"></span>
                <span class="navbar-toggler-bar bar3"></span>
              </button>
            </div>
            <a class="navbar-brand maior">Dashboard</a>
          </div>
          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navigation"
            aria-controls="navigation-index" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-bar navbar-kebab"></span>
            <span class="navbar-toggler-bar navbar-kebab"></span>
            <span class="navbar-toggler-bar navbar-kebab"></span>
          </button>
          <div class="collapse navbar-collapse justify-content-end" id="navigation">
            <ul class="navbar-nav">
              <li class="nav-item" style="text-align: end; margin-right: 10px;">
                <span id="BemVindo"></span>
              </li>
              <li class="nav-item">
                <a class="nav-link">
                  <i class="now-ui-icons users_single-02"></i>
                </a>
              </li>
              <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" id="navbarDropdownMenuLink" data-toggle="dropdown"
                  aria-haspopup="true" aria-expanded="false">
                  <i class="now-ui-icons location_world"></i>
                  <p>
                    <span class="d-lg-none d-md-block">Some Actions</span>
                  </p>
                </a>
                <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdownMenuLink">
                  <a class="dropdown-item" href=""><img src="https://i.imgur.com/cLfSqm3.png"
                      style="width: 24px;"></img> Português</a>
                  <a class="dropdown-item" href=""><img src="https://i.imgur.com/lYq0cdt.png" style="width: 24px;">
                    English</a>
                  <a class="dropdown-item" href=""><img src="https://i.imgur.com/S5eEVok.png" style="width: 24px;">
                    Español</a>
                </div>
              </li>
            </ul>
          </div>
        </div>
      </nav>
      <!-- End Navbar -->
      <div class="panel-header panel-header-sm">
      </div>
      <div class="content">
        <div class="row">
          <div class="col-md-12">
            <div class="card">
              <div class="card-header lado">
                <h4 class="card-title">Lista de processos</h4>
                <a onclick="window.location.reload();" href=""><i
                    class="now-ui-icons arrows-1_refresh-69 refresh"></i></a>
              </div>
              <!-- --------------------------------------------------------------------------------------------------------------------- -->
              <div class="containerP">

                <div class="responsive-table">
                  <div id="dynamic-table"></div>
                </div>
                <div id="botoesA">
                </div>

                <div id="botoesK">

                </div>

              </div>

              <div class="card-body">
                <div class="table-responsive">

                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <footer class="footer">
        <div class=" container-fluid ">
          <nav>
            <ul>
              <li>
                <a href="../../index.html">
                  MoniToll
                </a>
              </li>
              <li>
                <a href="../../sobre.html">
                  Sobre
                </a>
              </li>
              <li>
                <a href="../../contato.html">
                  Contato
                </a>
              </li>
            </ul>
          </nav>
          <div class="copyright" id="copyright">
            &copy; Copyright <a href="../../index.html">MoniToll.</a> Todos os direitos reservados
          </div>
        </div>
      </footer>
    </div>
  </div>



  <!-- modal grafico 1 -->
  <div class="modal-container" id="modal_container">
    <div class="modal-dash">
      <div class="modal-titulo">
        <br>
        <br>
        <h2 class="negrito">Cadastrar usuario</h2>
        <div class="inp">
          <input placeholder="Nome" id="nome_inp">
        </div>
        <div class="inp">
          <input placeholder="Email" id="email_inp">
        </div>
        <div class="inp">
          <input placeholder="Senha" id="senha_inp">
        </div>
        <button class="btn-cadastrar" onclick="CadastrarUsuario()">Cadastrar</button>
      </div>
      <button class="modal-close" id="close"><i class="now-ui-icons ui-1_simple-remove"></i></button>
    </div>
  </div>

  <!-- modal aviso -->
  <div class="modal-container-aviso" id="modal_container_aviso">
    <div class="modal-dash-aviso">
      <div id="modal_titulo_aviso" class="modal-titulo-aviso">
      </div>
      <button class="modal-close-aviso" id="close_aviso"><i class="now-ui-icons ui-1_simple-remove"></i></button>
    </div>
  </div>

</body>

</html>

<body>
  <!--   Core JS Files   -->
  <script src="assets/js/core/jquery.min.js"></script>
  <script src="assets/js/core/popper.min.js"></script>
  <script src="assets/js/core/bootstrap.min.js"></script>
  <script src="assets/js/plugins/perfect-scrollbar.jquery.min.js"></script>
  <!-- Chart JS -->
  <script src="assets/js/plugins/chartjs.min.js"></script>
  <!--  Notifications Plugin    -->
  <script src="assets/js/plugins/bootstrap-notify.js"></script>
  <!-- Control Center for Now Ui Dashboard: parallax effects, scripts for the example pages etc -->
  <script src="assets/js/now-ui-dashboard.min.js?v=1.5.0" type="text/javascript"></script>
  <!-- Now Ui Dashboard DEMO methods, don't include it in your project! -->
  <script src="assets/demo/demo.js"></script>
  <!-- CHAMANDO MOMENT LIB -->
  <script src="../lib/moment/moment.min.js"></script>
</body>

<script>

  function Logout() {
    sessionStorage.clear();
  }
</script>

<script>
  const open = document.getElementById('AddUsuario')
  const modal_container = document.getElementById('modal_container')
  const close = document.getElementById('close')


  open.addEventListener('click', () => { modal_container.classList.add('show') });
  close.addEventListener('click', () => { modal_container.classList.remove('show') });

  const modal_container_aviso = document.getElementById('modal_container_aviso')
  const close_aviso = document.getElementById('close_aviso')
  close_aviso.addEventListener('click', () => { modal_container_aviso.classList.remove('show') });
</script>

<script>
  var fkTorre = sessionStorage.ID_TORRE
  function CadastrarUsuario() {

    var nomeVar = nome_inp.value;
    var emailVar = email_inp.value;
    var senhaVar = senha_inp.value;
    var perfilVar = 3
    var fkEmpresa = sessionStorage.FK_EMPRESA

    if (nomeVar == "" || emailVar == "" || senhaVar == "") {

      modal_titulo_aviso.innerHTML = `<h2>Preencha todos os campos para prosseguir</h2>`
      modal_container_aviso.classList.add('show');
      return
    }
    if (emailVar.indexOf("@") == -1 || emailVar.indexOf(".com") == -1) {

      modal_titulo_aviso.innerHTML = `<h2>Esse email não é valido</h2>`
      modal_container_aviso.classList.add('show');
      return
    }

    fetch("/usuarios/cadastrarUsuario", {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify({
        // crie um atributo que recebe o valor recuperado aqui
        // Agora vá para o arquivo routes/usuario.js
        nomeServer: nomeVar,
        emailServer: emailVar,
        senhaServer: senhaVar,
        fkPerfilServer: perfilVar,
        fkEmpresaServer: fkEmpresa
      })
    }).then(function (resposta) {

      // console.log("resposta: ", resposta);

      if (resposta.ok) {
        modal_titulo_aviso.innerHTML = `<h2>Cadastro realizado com sucesso!</h2>`
        modal_container_aviso.classList.add('show');
      } else {
        modal_titulo_aviso.innerHTML = `<h2>Falha ao realizar cadastro</h2>`
        modal_container_aviso.classList.add('show');
      }
    }).catch(function (resposta) {
      console.log(`#ERRO: ${resposta}`);
    });

    return false;



  }
</script>

<script>
  var vetor_Componentes = []
  var nome = sessionStorage.NOME_USUARIO
  var perfil;
  if (sessionStorage.FK_PERFIL == 2) {
    perfil = 'Adm'
    AddUsuario.innerHTML = `<a><i class="now-ui-icons business_badge"></i><p class="maior">Adicionar Usuario</p></a>`
  } else {
    perfil = 'Fun'
  }
  BemVindo.innerHTML = `Bem vindo, ${nome}.<br> ${perfil}`

  fetch("/usuarios/ObterComponentes", {
    method: "POST",
    headers: {
      "Content-Type": "application/json"
    },
    body: JSON.stringify({
      fkTorreServer: fkTorre,
    })
  }).then(function (resposta) {
    console.log("ESTOU NO THEN DO entrar()!")

    if (resposta.ok) {
      console.log(resposta);

      resposta.json().then(json => {
        console.log(json);
        console.log(JSON.stringify(json));

        json.forEach(element => {
          vetor_Componentes.push(element.fkComponente)
        });
        vetor_Componentes.forEach(element => {
          if (element == 22) {
            temperatura.innerHTML = `<a href="temperatura.html" ><i class="now-ui-icons ui-2_settings-90"></i><p class="maior">Temperatura</p></a>`
          }
        });
      });
    }
  }).catch(function (erro) {
    console.log("ERRO: " + erro);
  })
</script>



<script>
  var firstFile = [];
  window.onload = function () {
    BuscarProc(sessionStorage.ID_TORRE)
  };
  function BuscarProc(fkTorre) {
    fetch(`/medidas/BuscarProc/${fkTorre}`, { cache: 'no-store' }).then(function (response) {
      if (response.ok) {
        response.json().then(function (resposta) {
          // console.log(`Dados recebidos: ${JSON.stringify(resposta)}`);
          // console.log(resposta)
          resposta.reverse();
          resposta.forEach(element => {
            // console.log(element)
            firstFile.push(element)
          });
          // PlotarGrafico(resposta, fkTorre);
        });
      } else {
        console.error('Nenhum dado encontrado ou erro na API');
      }
    })
      .catch(function (error) {
        console.error(`Erro na obtenção dos dados p/ gráfico: ${error.message}`);
      });
    setTimeout(() => createTable(), 3000);
    setTimeout(() => botoes(), 4000);
    setTimeout(() => verificarBotoes(), 5000);
  }

  function createTable() {
    console.log(firstFile)
    var divId = 'dynamic-table';
    var div = document.getElementById(divId);

    div.innerHTML = '<span class="loadingP">Carregando...</span>';
    botoesA.innerHTML = ''
    botoesK.innerHTML = ''

    setTimeout(() => {
      div.innerHTML = '';

      var tableId = 'sortable';
      var json = firstFile;
      var table = new DynamicTable(tableId, json);
      div.appendChild(table);

      new SortableTable(tableId);
    }, 500);
  }



  /**
  * *******************************************************************
  * **************************** SOLUTION ****************************
  * *******************************************************************
  */

  /**
  * *******************************************************************
  * HELPERS: helper functions I use in the solutions
  * *******************************************************************
  */

  // Sort helper
  function sortFn(a, b) {
    if (a.value < b.value) {
      return -1;
    }

    if (a.value > b.value) {
      return 1;
    }

    return 0;
  }

  // Sort the list
  function sortList(list, direction) {
    var sorted = list.sort(sortFn);

    if (direction === -1) {
      list.reverse();
    }

    return sorted;
  }

  // Event triggered on heading anchor click (which will trigger the sort)
  // function onHeadigClick(that, cellIndex) {
  //   return function () {
  //     that.sortColumn(this, cellIndex);

  //     return false;
  //   };
  // }

  // Create anchor for each th
  function createAnchor(html, index) {
    var a = document.createElement('a');
    a.href = '#';
    a.innerHTML = html;
    // a.onclick = onHeadigClick(this, index);

    return a;
  }

  /**
  * *******************************************************************
  * TASKS: from here are the real task solutions
  * *******************************************************************
  */

  /**
  * Solution for task A. Generate a table with dymanic headers based on the data
  * @param {string} id the id the table will have
  * @param {array} data json data
  *
  * @return {HTMLElement} resulting table
  */
  function DynamicTable(tableId, data) {
    var headings = data.reduce(function (result, item) {
      var item_headings = Object.keys(item);

      item_headings.forEach(function (heading) {
        if (result.indexOf(heading) === -1) {
          result.push(heading);
        }
      });

      return result;
    }, []);

    var table = document.createElement('table');
    var thead = document.createElement('thead');
    var tbody = document.createElement('tbody');
    var thead_tr = document.createElement('tr');

    headings.forEach(function (heading) {
      var cell = document.createElement('th');
      cell.innerHTML = heading;

      thead_tr.appendChild(cell);
    });
    data.forEach(function (item) {
      pid = item.Pid
      nome = item.Nome
      var tbody_tr = document.createElement('tr');

      headings.forEach(function (heading) {
        var cell = document.createElement('td');
        cell.innerHTML = item[heading] || '';

        tbody_tr.appendChild(cell);
      });

      tbody.appendChild(tbody_tr);
    });

    thead.appendChild(thead_tr);
    table.appendChild(thead);
    table.appendChild(tbody);
    table.id = tableId;

    return table;
  }

  /**
  * Solution for task B. reate a new instance of sortableTable tied to a table
  * @param {string} id table id
  */
  function SortableTable(id) {
    this.table = document.getElementById(id);
    this.lastSortedTh = null;

    if (this.table && this.table.nodeName === 'TABLE') {
      var headings = this.table.tHead.rows[0].cells;

      Object.assign([], headings).forEach(
        function (heading, index) {
          if (heading.className.match(/ascendent_sort|descendent_sort/)) {
            this.lastSortedTh = heading;
          }
        }.bind(this),
      );

      this.setTableSortable();
    }
  }

  SortableTable.prototype.setTableSortable = function () {
    var headings = this.table.tHead.rows[0].cells;

    Object.assign([], headings).forEach(
      function (heading, index) {
        var sortAnchor = createAnchor.bind(this);
        var html = heading.innerHTML;
        heading.innerHTML = '';
        heading.appendChild(sortAnchor(html, index));
      }.bind(this),
    );
  };

  SortableTable.prototype.sortColumn = function (el, cellIndex) {
    var tBody = this.table.tBodies[0];
    var rows = this.table.rows;
    var th = el.parentNode;
    var list = [];

    Object.assign([], rows).forEach(function (row, index) {
      if (index > 0) {
        var cell = row.cells[cellIndex];
        var content = cell.textContent || cell.innerText;

        list.push({
          value: content,
          row: row,
        });
      }
    });

    var hasAscendentClassName = th.className.match('ascendent_sort');
    var hasDescendentClassName = th.className.match('descendent_sort');

    list = sortList(list, hasAscendentClassName ? -1 : 1);

    if (hasAscendentClassName) {
      th.className = th.className.replace(/ascendent_sort/, 'descendent_sort');
    } else {
      if (hasDescendentClassName) {
        th.className = th.className.replace(/descendent_sort/, 'ascendent_sort');
      } else {
        th.className += 'ascendent_sort';
      }
    }

    if (this.lastSortedTh && th !== this.lastSortedTh) {
      this.lastSortedTh.className = this.lastSortedTh.className.replace(
        /descendent_sort|ascendent_sort/g,
        '',
      );
    }

    this.lastSortedTh = th;

    list.forEach(function (item, index) {
      tBody.appendChild(item.row);
    });
  };
</script>
<script>
  var contador = 0
  var contador2 = 0
  function botoes() {
    firstFile.forEach(element => {
      if (contador == 0) {
        contador += 1
        botoesA.innerHTML += `<div id="${element.Nome}" onclick="CadastrarProcessoConfiavel('${element.Nome}')" class="quadrado primeiro qAdd"><i class="adicionar now-ui-icons ui-1_simple-add"></i></div>`
      } else {
        botoesA.innerHTML += `<div id="${element.Nome}" onclick="CadastrarProcessoConfiavel('${element.Nome}')" class="quadrado qAdd ${element.Nome}"><i class="adicionar now-ui-icons ui-1_simple-add"></i></div>`
      }


      if (contador2 == 0) {
        contador2 += 1
        botoesK.innerHTML += `<div onclick="CadastrarProcessoMatar(${element.Pid},'${element.Nome}')" class="quadrado primeiro qKill"><i class="adicionar now-ui-icons ui-1_simple-remove"></i></div>`
      } else {
        botoesK.innerHTML += `<div onclick="CadastrarProcessoMatar(${element.Pid},'${element.Nome}')" class="quadrado qKill"><i class="adicionar now-ui-icons ui-1_simple-remove"></i></div>`
      }
    });
  }

  function verificarBotoes() {
    firstFile.forEach(element => {
      fetch("/usuarios/VerificarProcesso", {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify({
          nameServer: element.Nome,
          fkTorreServer: fkTorre,

        })
      }).then(function (resposta) {
        if (resposta.ok) {
          return
        } else {
          console.log(element.Nome)
          var botao = document.querySelectorAll(`[id='${element.Nome}']`);
          botao.forEach(element => {
            element.classList.remove('qAdd')
            element.innerHTML = ''
          });
        }
      }).catch(function (resposta) {
        console.log(`#ERRO: ${resposta}`);
      });
    });
  }

</script>
<script>
  function CadastrarProcessoMatar(pid, name) {
    var dh = moment()
    var datahora = dh.format('D/MM/YYYY HH:mm:ss');
    fetch("/usuarios/CadastrarProcessoMatar", {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify({
        pidServer: pid,
        nameServer: name,
        datahoraServer: datahora,
        fkTorreServer: fkTorre,
      })
    }).then(function (resposta) {

      console.log("resposta: ", resposta);

      if (resposta.ok) {
        console.log('Inseriu o processo na tabela matar');
        modal_titulo_aviso.innerHTML = `<h2>Ordem para encerrar processo ${name} emitida!</h2>`
        modal_container_aviso.classList.add('show');
      } else {
        throw ("Houve um erro ao tentar realizar o cadastro do processo na tabela Matar");
      }
    }).catch(function (resposta) {
      console.log(`#ERRO: ${resposta}`);
    });



    fetch("/usuarios/CadastrarProcessoMorto", {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify({
        pidServer: pid,
        nameServer: name,
        datahoraServer: datahora,
        fkTorreServer: fkTorre,
        fkUsuarioServer: sessionStorage.ID_USUARIO,
      })
    }).then(function (resposta) {

      console.log("resposta: ", resposta);

      if (resposta.ok) {
        console.log('Inseriu o processo na tabela mortos');
      } else {
        throw ("Houve um erro ao tentar realizar o cadastro do processo na tabela Matar");
      }
    }).catch(function (resposta) {
      console.log(`#ERRO: ${resposta}`);
    });
  }



  function CadastrarProcessoConfiavel(name) {
    var dh = moment()
    var datahora = dh.format('D/MM/YYYY HH:mm:ss');
    fetch("/usuarios/CadastrarProcessoConfiavel", {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify({
        nameServer: name,
        datahoraServer: datahora,
        fkTorreServer: fkTorre,
      })
    }).then(function (resposta) {

      console.log("resposta: ", resposta);

      if (resposta.ok) {
        modal_titulo_aviso.innerHTML = `<h2>Porcesso ${name} cadastrado como confiavel!</h2>`
        modal_container_aviso.classList.add('show');
        verificarBotoes()
      } else {
        throw ("Houve um erro ao tentar realizar o cadastro do processo na tabela confiavel");
      }
    }).catch(function (resposta) {
      console.log(`#ERRO: ${resposta}`);
    });
  }

</script>